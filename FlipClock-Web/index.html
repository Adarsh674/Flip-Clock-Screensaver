<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Flip Clock Screensaver</title>
    <style>
        body {
            background-color: #000;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none;
        }

        .clock {
            display: flex;
            font-family: 'Helvetica', sans-serif;
            color: #FFF;
            font-size: 300px;
            height: 300px;
        }

        .ampm {
            font-size: 50px;
            font-family: 'Helvetica', sans-serif;
            color: #fff;
            text-align: left;
            align-self: top;
            margin-right: 25px;
        }

        .digit-container {
            position: relative;
            background-color: rgba(128,128,128,.5);
            height: 300px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 25px;
        }

        .digit-container1 {
            position: relative;
            height: 80px;
            width: 70px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 25px;
            align-self: end;
            margin-left: 25px;
        }

        .strip {
            position: absolute;
            rotate: 90deg;
            width: 6px;
            height: 135%;
            background-color: #000;
            left: 50%;
        }

        .digit {
            color: white;
            position: relative;
            width: 100px;
            text-align: center;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            margin-right: 80px;
            margin-left: 15px;
        }

        .digit1 {
            color: white;
            position: relative;
            font-size: 50px;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        .separator {
            color: #FFF;
            margin-right: 25px;
        }

        .flip-up {
            transform: rotateX(-90deg);
        }

        .flip-down {
            transform: rotateX(0deg);
        }
    </style>
</head>
<body>
    <div id="clock" class="clock">
        <div class="ampm">AM</div>
        <div class="digit-container">
            <div class="digit hour1"><span>0</span></div>
            <div class="digit hour2"><span>0</span></div>
            <div class="strip"></div>
        </div>
        <div class="separator"></div>
        <div class="digit-container">
            <div class="digit minute1"><span>0</span></div>
            <div class="digit minute2"><span>0</span></div>
            <div class="strip"></div>
        </div>
        <div class="digit-container1">
            <div class="digit1 second1"><span>0</span></div>
            <div class="digit1 second2"><span>0</span></div>
        </div>
    </div>
    <script>
        var previousTime = null;

        function initializeClock() {
            var now = new Date();
            var hours = now.getHours();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // Handle midnight (0 hours)

            var minutes = now.getMinutes().toString().padStart(2, '0');
            var seconds = now.getSeconds().toString().padStart(2, '0');

            if (hours >= 10) {
                setDigit('hour1', 1);
            }
            else {
                var hour1Digit = document.querySelector('.hour1');
                hour1Digit.style.display = hours >= 10 ? 'block' : 'none';
            }

            setDigit('hour2', hours % 10);
            setDigit('minute1', minutes.charAt(0));
            setDigit('minute2', minutes.charAt(1));
            setDigit('second1', seconds.charAt(0));
            setDigit('second2', seconds.charAt(1));
            setAmPm(ampm);
        }

        function updateClock() {
            var now = new Date();
            var hours = now.getHours();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // Handle midnight (0 hours)

            var minutes = now.getMinutes().toString().padStart(2, '0');
            var seconds = now.getSeconds().toString().padStart(2, '0');

            if (hours >= 10) {
                setDigit('hour1', 1);
            }
            else {
                var hour1Digit = document.querySelector('.hour1');
                hour1Digit.style.display = hours >= 10 ? 'block' : 'none';
            }

            animateFlip('hour1', Math.floor(hours / 10));
            animateFlip('hour2', hours % 10);
            animateFlip('minute1', minutes.charAt(0));
            animateFlip('minute2', minutes.charAt(1));
            animateFlip('second1', seconds.charAt(0));
            animateFlip('second2', seconds.charAt(1));
            animateAmPm(ampm);
        }

        function animateFlip(className, value) {
            var digit = document.getElementsByClassName(className)[0];
            if (digit.textContent !== value.toString()) {
                digit.classList.remove('flip-down');
                digit.classList.add('flip-up');
                setTimeout(function() {
                    digit.textContent = value;
                    digit.classList.remove('flip-up');
                    digit.classList.add('flip-down');
                }, 500);
            }
        }

        function setDigit(className, value) {
            var digit = document.getElementsByClassName(className)[0];
            digit.textContent = value;
        }

        function setAmPm(value) {
            var ampmElement = document.querySelector('.ampm');
            ampmElement.textContent = value;
        }

        function animateAmPm(value) {
            var ampmElement = document.querySelector('.ampm');
            if (ampmElement.textContent[0] !== value[0]) {
                ampmElement.classList.remove('flip-down');
                ampmElement.classList.add('flip-up');
                setTimeout(function() {
                    ampmElement.textContent = value;
                    ampmElement.classList.remove('flip-up');
                    ampmElement.classList.add('flip-down');
                }, 500);
            }
        }

        initializeClock();
        setInterval(updateClock, 1000);

        function closeSite() {
            window.close();
        }

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.addEventListener('keydown', closeSite);
                document.addEventListener('mousemove', closeSite);
            }, 1000); // Delay execution for 1 second (adjust as needed)
        });
    </script>
</body>
</html>
